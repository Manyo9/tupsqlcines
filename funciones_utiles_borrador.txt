--esto trae las butacas desocupadas
--verificar logica porfa
--hace falta cambiar id_funcion en los 3 lugares
--hay que hacerlo SP despues

select id_butaca, cod_butaca from funciones f
join salas sa on sa.id_sala=f.id_sala
join butacas bu on bu.id_sala=sa.id_sala
where id_funcion = 19 
and bu.id_butaca not in
(select rb.id_butaca from reservas re 
join reservas_butaca rb on rb.id_resev_but = re.id_reserva
where id_funcion = 19 and vigencia = 1
union
select id_butaca from ticket t
join detalles_ticket dt on dt.nro_ticket = t.nro_ticket
where id_funcion = 19)